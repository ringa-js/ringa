{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0b12a20580d77429c0fa","webpack:///./src/CommandAbstract.js","webpack:///./src/RingaObject.js","webpack:///./src/RingaEvent.js","webpack:///./src/CommandFactory.js","webpack:///./src/CommandThreadFactory.js","webpack:///./src/RingaEventFactory.js","webpack:///./~/hasharray/index.js","webpack:///./src/RingaHashArray.js","webpack:///./src/util/command.js","webpack:///./src/util/function.js","webpack:///./src/Controller.js","webpack:///./src/commands/Command.js","webpack:///./src/decorators/inject.js","webpack:///./src/index.js","webpack:///./~/error-stack-parser/error-stack-parser.js","webpack:///./~/error-stack-parser/~/stackframe/stackframe.js","webpack:///./~/hasharray/src/HashArray.js","webpack:///./~/jclass/index.js","webpack:///./src/CommandThread.js","webpack:///./src/commands/CommandEventWrapper.js","webpack:///./src/commands/CommandFunctionWrapper.js","webpack:///./src/commands/CommandPromiseWrapper.js","webpack:///./src/commands/CommandsParallelWrapper.js"],"names":["CommandAbstract","commandThread","controller","Error","id","constructor","name","options","timeout","_timeoutToken","setTimeout","_timeoutHandler","bind","undefined","clearTimeout","doneHandler","failHandler","startTimeoutCheck","endTimeoutCheck","error","kill","message","toString","console","fail","ringaEvent","RingaObject","value","eventIx","RingaEvent","type","detail","bubbles","cancelable","customEvent","CustomEvent","dispatched","_errors","listeners","caught","domNode","document","_dispatch","window","__DEV__","dispatchStack","parse","shift","search","dispatchEvent","killed","pushError","errors","push","log","target","stack","_dispatchEvent","DONE","FAIL","forEach","listener","eventType","handler","addListener","currentTarget","PREHOOK","CommandFactory","executee","instance","argNames","execute","ringaEventFactory","then","prototype","cacheArguments","Array","CommandThreadFactory","commandFactories","synchronous","addOne","_hashArray","obj","call","addAll","threadId","RingaEventFactory","requireCatch","cancellable","callee","newDetail","Object","assign","_callee","module","exports","require","RingaHashArray","key","changeHandler","add","arguments","addMap","get","getAll","getAsArray","sample","remove","removeByKey","removeAll","intersection","complement","has","hasMultiple","collides","forEachDeep","sum","average","filter","objectAt","clone","_list","buildArgumentsFromRingaEvent","commandAbstract","expectedArguments","args","injections","_injections","done","argName","hasOwnProperty","join","getArgNames","func","s","substring","indexOf","replace","length","split","Controller","throwKillsThread","consoleLogFails","commandThreads","eventTypeToCommandThreadFactory","Map","_eventHandler","commandThreadFactoryOrArray","commandThreadFactory","build","addEventListener","_eventType","removeEventListener","getListener","run","threadDoneHandler","threadFailHandler","abort","preInvokeHandler","_fail","invoke","postInvokeHandler","_done","details","dispatch","Command","donePassedAsArg","apply","inject","classToInjections","WeakMap","classTypeOrName","option","descriptor","injector","setter","set","forceUpdate","ForceUpdate","Symbol","Event","iif","condition","executor","Spawn","Bind","EventFactory","root","factory","define","ErrorStackParser","StackFrame","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","ErrorStackParser$$parse","stacktrace","parseOpera","match","parseV8OrIE","parseFFOrSafari","extractLocation","ErrorStackParser$$extractLocation","urlLike","regExp","parts","exec","ErrorStackParser$$parseV8OrIE","filtered","line","map","tokens","slice","locationParts","pop","functionName","fileName","lineNumber","columnNumber","source","ErrorStackParser$$parseFFOrSafari","ErrorStackParser$$parseOpera","e","parseOpera9","parseOpera10","parseOpera11","ErrorStackParser$$parseOpera9","lineRE","lines","result","i","len","ErrorStackParser$$parseOpera10","ErrorStackParser$$parseOpera11","functionCall","argsRaw","_isNumber","n","isNaN","parseFloat","isFinite","_capitalize","str","toUpperCase","_getter","p","booleanProps","numericProps","stringProps","arrayProps","props","concat","getArgs","setArgs","v","TypeError","getEvalOrigin","evalOrigin","setEvalOrigin","getFunctionName","getFileName","getLineNumber","getColumnNumber","Boolean","j","Number","k","String","JClass","HashArray","_extend","init","keyFields","callback","_map","isHashArray","ignoreDuplicates","needsDupCheck","inst","arr","other","self","ret","allItems","all","item","keys","res","getUniqueRandomIntegers","count","min","max","Math","r","floor","random","image","ixs","rand","removed","items","ix","key2","splice","old","path","dup","objs","ignoreItems","weightKey","tot","weightsTotal","callbackOrKey","defaultCallback","ha","val","defineProperty","Function","isFn","extend","sources","defaultOptions","_isClassObject","initializing","BaseClass","_subClasses","instanceMembers","classMembers","_class","SuperClass","superPrototype","_superClass","_extends","property","getOwnPropertyDescriptor","member","superMember","_super","ClassMembersSuperClass","_members","opts","ClassMembersClass","_instanceClass","_convert","cls","origin","_origin","_construct","Class","_superDescriptor","prop","CommandThread","running","children","commandFactory","command","buildCommands","index","executeNext","_execute","_commandDoneHandler","_commandFailHandler","CommandEventWrapper","dispatchedRingaEvent","addDoneListener","dispatchedRingaEventDoneHandler","addFailListener","dispatchedRingaEventFailHandler","CommandFunctionWrapper","substr","CommandPromiseWrapper","CommandsParallelWrapper"],"mappings":"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","file":"ringa.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Ringa\"] = factory();\n\telse\n\t\troot[\"Ringa\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0b12a20580d77429c0fa","import RingaObject from './RingaObject';\n\n/**\n * Command is the base class for all command objects that are run in a Ringa application or module.\n */\nclass CommandAbstract extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new Command. This *must* be called via super() from a subclass constructor.\n   *\n   * @param commandThread The parent thread that owns this command.\n   */\n  constructor(commandThread) {\n    super();\n\n    if (!commandThread.controller) {\n      throw Error('Command(): attempting to build a command connected to a CommandThread that has no attached controller.');\n    }\n\n    this.id = commandThread.controller.id + '_' + this.constructor.name;\n\n    this.commandThread = commandThread;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get ringaEvent() {\n    return this.commandThread.ringaEvent;\n  }\n\n  get controller() {\n    return this.commandThread.controller;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  startTimeoutCheck() {\n    if (this.controller.options.timeout !== -1) {\n      this._timeoutToken = setTimeout(this._timeoutHandler.bind(this), this.controller.options.timeout);\n    }\n  }\n\n  endTimeoutCheck() {\n    if (this._timeoutToken !== undefined) {\n      clearTimeout(this._timeoutToken);\n    }\n\n    this._timeoutToken = undefined;\n  }\n\n  /**\n   * Internal execution method called by CommandThread only. This must be overridden in a\n   * subclass to provide the appropriate functionality.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    this.doneHandler = doneHandler;\n    this.failHandler = failHandler;\n\n    this.startTimeoutCheck();\n  }\n\n  /**\n   * Call this method when the Command is ready to hand off control back to the parent CommandThread.\n   */\n  done() {\n    this.endTimeoutCheck();\n\n    this.doneHandler(true);\n  }\n\n  /**\n   * Call this method if an error occurred during the processing of a command.\n   *\n   * @param error The error that has occurred.\n   * @param kill True if you want the thread to die immediately.\n   */\n  fail(error, kill = false) {\n    this.endTimeoutCheck();\n\n    this.error = error;\n\n    this.failHandler(error, kill);\n  }\n\n  /**\n   * By default is this commands id.\n   *\n   * @returns {string|*}\n   */\n  toString() {\n    return this.id;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  _timeoutHandler() {\n    let message = 'CommandAbstract::_timeoutHandler(): the timeout for this command was exceeded ' + this.toString();\n\n    console.error(message);\n\n    this.fail(new Error(message), this);\n  }\n}\n\nexport default CommandAbstract;\n\n\n// WEBPACK FOOTER //\n// ./src/CommandAbstract.js","class RingaObject {\n  constructor(id) {\n    this.id = id;\n  }\n\n  toString(value) {\n    return this.id + ' ' + (value || ' | RingaObject::toString() is designed to be overridden by the subclass.');\n  }\n}\n\nexport default RingaObject;\n\n\n// WEBPACK FOOTER //\n// ./src/RingaObject.js","import RingaObject from './RingaObject';\nimport ErrorStackParser from 'error-stack-parser';\n\nlet eventIx = 0;\n\n/**\n * RingaEvent wraps a CustomEvent that is dispatched on the DOM:\n *\n *   let event = new RingaEvent('change', {\n *     property: 'index',\n *     newValue: 1\n *   });\n *\n *   event.dispatch();\n *\n * By default, the event will be dispatched on the document object, but you can provide a custom DOMNode to dispatch\n * from:\n *\n *   event.dispatch(myDiv);\n *\n * All RingaEvents bubble and are cancelable by default.\n */\nclass RingaEvent extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Build a RingaEvent that wraps a CustomEvent internally.\n   *\n   * @param type\n   * @param detail\n   * @param bubbles\n   * @param cancelable\n   */\n  constructor(type, detail = {}, bubbles = true, cancelable = true) {\n    super('event_' + type + '_' + eventIx++);\n\n    this.detail = detail;\n    detail.ringaEvent = this;\n\n    this.customEvent = new CustomEvent(type, {\n      detail,\n      bubbles,\n      cancelable\n    });\n\n    this.dispatched = false;\n    this.controller = undefined;\n\n    this._errors = undefined;\n\n    this.listeners = {};\n\n    this.caught = false;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get type() {\n    return this.customEvent.type;\n  }\n\n  get bubbles() {\n    return this.customEvent.bubbles;\n  }\n\n  get cancelable() {\n    return this.customEvent.cancelable;\n  }\n\n  get target() {\n    return this.customEvent.target;\n  }\n\n  get currentTarget() {\n    return this.customEvent.currentTarget;\n  }\n\n  get errors() {\n    return this._errors;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Dispatch the event on the provided domNode.\n   *\n   * Note: this method is always delayed so you must not access its properties\n   * until a frame later.\n   *\n   * @param domNode\n   */\n  dispatch(domNode = document) {\n    setTimeout(this._dispatch.bind(this, domNode), 0);\n\n    return this;\n  }\n\n  _dispatch(domNode) {\n    if (this.dispatched) {\n      throw Error('RingaEvent::dispatch(): events should only be dispatched once!', this);\n    }\n\n    this.dispatched = true;\n\n    // TODO this should be in dispatch not _dispatch\n    if (window.__DEV__) {\n      this.dispatchStack = ErrorStackParser.parse(new Error());\n      this.dispatchStack.shift(); // Remove a reference to RingaEvent.dispatch()\n      if (this.dispatchStack[0].toString().search('Object.dispatch') !== -1) {\n        this.dispatchStack.shift(); // Remove a reference to Object.dispatch()\n      }\n    } else {\n      this.dispatchStack = 'To turn on stack traces, build Ringa in development mode. See documentation.';\n    }\n\n    domNode.dispatchEvent(this.customEvent);\n  }\n\n  /**\n   * Completely kills the current Ringa thread, keeping any subsequent commands from running.\n   */\n  fail(error) {\n    this.killed = true;\n\n    this.pushError(error);\n  }\n\n  pushError(error) {\n    this._errors = this._errors || [];\n    this.errors.push(error);\n  }\n\n  toString() {\n    console.log('[' + this.type + ']', this.detail, this.target, this.stack);\n  }\n\n  _done() {\n    this._dispatchEvent(RingaEvent.DONE);\n  }\n\n  _fail(error) {\n    this._dispatchEvent(RingaEvent.FAIL, undefined, error);\n  }\n\n  _dispatchEvent(type, detail, error) {\n    let listeners = this.listeners[type];\n\n    if (listeners) {\n      listeners.forEach((listener) => {\n        listener({\n          type,\n          detail,\n          error\n        });\n      });\n    }\n  }\n\n  /**\n   * Add a listener for either RingaEvent.DONE or RingaEvent.FAIL for when the CommandThread that\n   * was triggered by this event has completed.\n   *\n   * @param eventType\n   * @param handler\n   */\n  addListener(eventType, handler) {\n    if (typeof eventType !== 'string') {\n      throw Error('RingaEvent::addListener(): invalid eventType provided!' + eventType);\n    }\n\n    this.listeners[eventType] = this.listeners[eventType] || [];\n    this.listeners[eventType].push(handler);\n\n    return this;\n  }\n\n  addDoneListener(handler) {\n    return this.addListener(RingaEvent.DONE, handler);\n  }\n\n  addFailListener(handler) {\n    return this.addListener(RingaEvent.FAIL, handler);\n  }\n}\n\nRingaEvent.DONE = 'done';\nRingaEvent.FAIL = 'fail';\nRingaEvent.PREHOOK = 'prehook';\n\nexport default RingaEvent;\n\n\n// WEBPACK FOOTER //\n// ./src/RingaEvent.js","import CommandAbstract from './CommandAbstract';\nimport CommandFunctionWrapper from './commands/CommandFunctionWrapper';\nimport CommandPromiseWrapper from './commands/CommandPromiseWrapper';\nimport CommandEventWrapper from './commands/CommandEventWrapper';\nimport CommandsParallelWrapper from './commands/CommandsParallelWrapper';\nimport RingaEventFactory from './RingaEventFactory';\nimport {getArgNames} from './util/function';\n\nclass CommandFactory {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructs a CommandFactory.\n   *\n   * @param executee This can be a Class, a instance, a function... we determine what type of\n   *   CommandAbstract to build based on what is passed in. This makes things extensible.\n   */\n  constructor(executee) {\n    this.executee = executee;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  cacheArguments(instance) {\n    this.argNames = getArgNames(instance.execute);\n  }\n\n  build(commandThread) {\n    if (typeof this.executee === 'string') {\n      let ringaEventFactory = new RingaEventFactory(this.executee);\n      return new CommandEventWrapper(commandThread, ringaEventFactory);\n    } else if (typeof this.executee.then === 'function') {\n      return new CommandPromiseWrapper(commandThread, this.executee);\n    } else if (typeof this.executee === 'function') {\n      if (this.executee.prototype instanceof CommandAbstract) {\n        let instance = new this.executee(commandThread, this.argNames);\n\n        if (!this.argNames) {\n          this.cacheArguments(instance);\n          instance.argNames = this.argNames;\n        }\n\n        return instance;\n      } else {\n        return new CommandFunctionWrapper(commandThread, this.executee);\n      }\n    } else if (this.executee instanceof Array) {\n      // This might be a group of CommandAbstracts that should be run synchronously\n      return new CommandsParallelWrapper(commandThread, this.executee);\n    } else if (typeof this.executee === 'object' && this.executee instanceof RingaEventFactory) {\n      return new CommandEventWrapper(commandThread, this.executee);\n    }\n\n    throw Error('CommandFactory::build(): the type of executee you provided is not supported by Ringa: ' + typeof this.executee + ': ' + this.executee);\n  }\n}\n\nexport default CommandFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/CommandFactory.js","import RingaHashArray from './RingaHashArray';\nimport CommandThread from './CommandThread';\nimport CommandFactory from './CommandFactory';\n\nclass CommandThreadFactory extends RingaHashArray {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(id, commandFactories, options) {\n    super(id || 'commandFactory');\n\n    options = options || {};\n    options.synchronous = options.synchronous === undefined ? false : options.synchronous;\n\n    let addOne = this._hashArray.addOne;\n    this._hashArray.addOne = function(obj) {\n      if (!(obj instanceof CommandFactory)) {\n        obj = new CommandFactory(obj);\n      }\n\n      addOne.call(this, obj);\n    }\n\n    if (commandFactories) {\n      this.addAll(commandFactories);\n    }\n\n    this.threadId = 0;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  build(ringaEvent) {\n    if (!this.controller) {\n      console.log('CommandThreadFactory::build(): controller was not set before the build method was called.');\n    }\n\n    let commandThread = new CommandThread(this.id + '_Thread' + this.threadId, this);\n\n    this.threadId++;\n\n    return commandThread;\n  }\n}\n\nexport default CommandThreadFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/CommandThreadFactory.js","import RingaEvent from './RingaEvent';\n\nclass RingaEventFactory {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(eventType, detail, domNode, requireCatch = false, bubbles = true, cancellable = true) {\n    this.eventType = eventType;\n    this.detail = detail;\n    this.domNode = domNode;\n    this.bubbles = true;\n    this.cancellable = true;\n    this.requireCatch = requireCatch;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  build(callee) {\n    let newDetail = {};\n\n    Object.assign(newDetail, this.detail);\n\n    newDetail._callee = callee;\n    newDetail.requireCatch = this.requireCatch;\n\n    return new RingaEvent(this.eventType, newDetail, this.bubbles, this.cancellable);\n  }\n\n  toString() {\n    return 'RingaEventFactory_' + this.eventType;\n  }\n}\n\nexport default RingaEventFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/RingaEventFactory.js","module.exports = require('./src/HashArray.js');\n\n\n// WEBPACK FOOTER //\n// ./~/hasharray/index.js","import HashArray from 'hasharray';\nimport RingaObject from './RingaObject';\n\n/**\n * This is a proxy class for HashArray that extends RingaObject.\n */\nclass RingaHashArray extends RingaObject {\n  constructor(id = '[ID]', key = 'id', changeHandler = undefined, options = undefined) {\n    super(id);\n\n    this._hashArray = new HashArray(key, changeHandler, options);\n  }\n\n  get all() {\n    return this._hashArray._list;\n  }\n  add() {\n    return this._hashArray.add(...arguments);\n  }\n  addAll() {\n    return this._hashArray.addAll(...arguments);\n  }\n  addMap(){\n    return this._hashArray.addMap(...arguments);\n  }\n  addOne(){\n    return this._hashArray.addOne(...arguments);\n  }\n  get() {\n    return this._hashArray.get(...arguments);\n  }\n  getAll(){\n    return this._hashArray.getAll(...arguments);\n  }\n  getAsArray(){\n    return this._hashArray.getAsArray(...arguments);\n  }\n  sample(){\n    return this._hashArray.sample(...arguments);\n  }\n  remove(){\n    return this._hashArray.remove(...arguments);\n  }\n  removeByKey(){\n    return this._hashArray.removeByKey(...arguments);\n  }\n  removeAll(){\n    return this._hashArray.removeAll(...arguments);\n  }\n  intersection(){\n    return this._hashArray.intersection(...arguments);\n  }\n  complement(){\n    return this._hashArray.complement(...arguments);\n  }\n  has(){\n    return this._hashArray.has(...arguments);\n  }\n  hasMultiple(){\n    return this._hashArray.hasMultiple(...arguments);\n  }\n  collides(){\n    return this._hashArray.collides(...arguments);\n  }\n  forEach(){\n    return this._hashArray.forEach(...arguments);\n  }\n  forEachDeep(){\n    return this._hashArray.forEachDeep(...arguments);\n  }\n  sum(){\n    return this._hashArray.sum(...arguments);\n  }\n  average(){\n    return this._hashArray.average(...arguments);\n  }\n  filter(){\n    return this._hashArray.filter(...arguments);\n  }\n  objectAt(){\n    return this._hashArray.objectAt(...arguments);\n  }\n  clone(){\n    return this._hashArray.clone(...arguments);\n  }\n}\n\nexport default RingaHashArray;\n\n\n// WEBPACK FOOTER //\n// ./src/RingaHashArray.js","/**\n * This method is used for injecting RingaEvent.detail properties into a function owned by a CommandAbstract. It uses the data\n * gathered from introspecting a provided function to determine a set of arguments to\n * call the function with. It maps everything on ringaEvent.detail to arguments on the function.\n *\n * If our function is:\n *\n *    execute(user, filter) {...}\n *\n *  Then expectedArguments should be ['user', 'filter']\n *\n *  To generate the expected arguments, see util/function.js::getArgNames.\n *\n * We want to find ringaEvent.detail['user'] and ringaEvent.detail['filter']\n * and pass those through and error if one of them is missing.\n *\n * Note that there are other properties that can be requested in the arguments list of execute:\n *\n * controller: the Controller object that is handling this thread\n * commandThread: the CommandThread object that built this Command\n * ringaEvent: the ringaEvent itself (instead of one of its detail properties)\n * customEvent: the customEvent that is wrapped by the ringaEvent that was used to bubble up the DOM\n * target: the target DOMNode that triggered the customEvent was dispatched on.\n * done: the parent CommandAbstract::done(). CommandFunction is an example of where this is needed.\n * fail: the parent CommandAbstract::fail(). CommandFunction is an example of where this is needed.\n *\n * @param commandAbstract The CommandAbstract subclass instance.\n * @param expectedArguments An array of argument names that the target function expects.\n * @param ringaEvent An instance of RingaEvent that has been dispatched and contains a details Object with properties to be injected.\n *\n * @returns {Array}\n */\nexport const buildArgumentsFromRingaEvent = function(commandAbstract, expectedArguments, ringaEvent) {\n  let args = [];\n\n  if (!(expectedArguments instanceof Array)) {\n    throw Error('buildArgumentsFromRingaEvent(): An internal error has occurred in that expectedArguments is not an Array!');\n  }\n\n  let injections = commandAbstract._injections = commandAbstract._injections || {\n      controller: commandAbstract.controller,\n      commandThread: commandAbstract.commandThread,\n      ringaEvent: ringaEvent,\n      customEvent: ringaEvent.customEvent,\n      target: ringaEvent.target,\n      done: commandAbstract.done,\n      fail: commandAbstract.fail\n    };\n\n  // Merge controller.options.injections into our injector\n  for (var key in commandAbstract.controller.options.injections) {\n    injections[key] = commandAbstract.controller.options.injections[key];\n  }\n\n  expectedArguments.forEach((argName) => {\n    if (ringaEvent.detail && ringaEvent.detail.hasOwnProperty(argName)) {\n      args.push(ringaEvent.detail[argName]);\n    } else if (injections.hasOwnProperty(argName)) {\n      args.push(injections[argName]);\n    } else {\n      let message = commandAbstract.toString() +\n      ': the property \\'' +\n      argName +\n      '\\' was not provided on the dispatched ringaEvent.' +\n      'Expected Arguments were: [\\'' + expectedArguments.join('\\'.\\'') +\n      '\\'] Dispatched from: ' +\n        (ringaEvent.dispatchStack ? ringaEvent.dispatchStack[0] : 'unknown stack.');\n\n      throw Error(message);\n    }\n  });\n\n  return args;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/util/command.js","/**\n * This function returns the arguments for another method as an array.\n *\n * TODO: this should give some indication in its return on which arguments are optional (e.g. func(a=1,b=2,c='whatever'))\n *\n * @param func\n * @returns {Array}\n */\nexport const getArgNames = function (func) {\n  var s = func.toString();\n  s = s.substring(s.indexOf('(')+1, s.indexOf(')'));\n  s = s.replace(/[\\r\\n\\s]*/g, '');\n  s = s.replace(/\\\\+['\"]/g, '').replace(/=\\s*([\"']).*?\\1/g, '').replace(/=.*?(,|$)/g, '');\n  return s.length !== 0 ? s.split(',') : [];\n};\n\n\n// WEBPACK FOOTER //\n// ./src/util/function.js","import CommandThreadFactory from './CommandThreadFactory';\nimport RingaObject from './RingaObject';\nimport HashArray from 'hasharray';\nimport RingaEvent from './RingaEvent';\n\n/**\n * Controller is the hub for events dispatched on the DOM invoking threads of commands.\n */\nclass Controller extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructs a new controller.\n   *\n   * @param id The id of this controller, primarily used for internal hashes and debugging. Must be unique.\n   * @param domNode The native browser DOMNode element (not a React Node) to attach event listeners to.\n   * @param options See documentation on Controller options. Defaults are provided, so this is optional.\n   */\n  constructor(id, domNode, options) {\n    super(id);\n\n    if (!domNode) {\n      throw Error('Controller:constructor(): no DOMNode provided to constructor!');\n    }\n\n    this.domNode = domNode;\n\n    this.options = options || {};\n    this.options.timeout = this.options.timeout || 5000;\n    this.options.throwKillsThread = this.options.throwKillsThread === undefined ? true : false;\n    this.options.consoleLogFails = this.options.consoleLogFails === undefined ? true : false;\n    this.options.injections = this.options.injections || {};\n\n    this.commandThreads = new HashArray('id');\n\n    this.eventTypeToCommandThreadFactory = new Map();\n\n    this._eventHandler = this._eventHandler.bind(this);\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  getListener(eventType) {\n    return this.eventTypeToCommandThreadFactory[eventType];\n  }\n\n  addListener(eventType, commandThreadFactoryOrArray) {\n    let commandThreadFactory;\n\n    if (!commandThreadFactoryOrArray || commandThreadFactoryOrArray instanceof Array) {\n      commandThreadFactory = new CommandThreadFactory(this.id + '_' + eventType + '_CommandThreadFactory', commandThreadFactoryOrArray);\n    } else if (typeof commandThreadFactoryOrArray.build === 'function') {\n      commandThreadFactory = commandThreadFactoryOrArray;\n    } else {\n      throw Error('Controller::addListener(): the provided commandThreadFactoryOrArray is not valid!');\n    }\n\n    if (!commandThreadFactory || !(commandThreadFactory instanceof CommandThreadFactory)) {\n      throw Error('Controller::addListener(): commandThreadFactory not an instance of CommandThreadFactory');\n    }\n\n    if (commandThreadFactory.controller) {\n      throw Error('Controller::addListener(): commandThreadFactory cannot have two parent controllers!');\n    }\n\n    if (this.eventTypeToCommandThreadFactory[eventType]) {\n      throw Error('Controller.addListener(): the event \\'' + eventType + '\\' has already been added! Use getListener() to make modifications.');\n    }\n\n    commandThreadFactory.controller = this;\n\n    this.eventTypeToCommandThreadFactory[eventType] = commandThreadFactory;\n\n    if (typeof eventType === 'string') {\n      this.domNode.addEventListener(eventType, this._eventHandler);\n    } else {\n      let _eventType = undefined;\n\n      if (eventType.hasOwnProperty('toString')) {\n        _eventType = eventType.toString();\n      }\n\n      if (_eventType) {\n        this.domNode.addEventListener(_eventType, this._eventHandler.bind(this));\n      } else {\n        throw Error('Controller::addListener(): provided eventType is invalid.', eventType);\n      }\n    }\n\n    return commandThreadFactory;\n  }\n\n  removeListener(eventType) {\n    let commandThreadFactory = this.eventTypeToCommandThreadFactory[eventType];\n\n    if (commandThreadFactory) {\n      delete this.eventTypeToCommandThreadFactory[eventType];\n\n      this.domNode.removeEventListener(eventType, this._eventHandler);\n\n      return commandThreadFactory;\n    }\n\n    throw Error('Controller:removeListener(): could not find a listener for \\'' + eventType + '\\'', this);\n  }\n\n  hasListener(eventType) {\n    return this.getListener(eventType) !== undefined;\n  }\n\n  invoke(ringaEvent, commandThreadFactory) {\n    let commandThread = commandThreadFactory.build(ringaEvent);\n\n    this.commandThreads.add(commandThread);\n\n    ringaEvent._dispatchEvent(RingaEvent.PREHOOK);\n\n    // TODO PREHOOK should allow the handler to cancel running of the thread.\n    commandThread.run(ringaEvent, this.threadDoneHandler.bind(this), this.threadFailHandler.bind(this));\n\n    return commandThread;\n  }\n\n  //-----------------------------------\n  // Events\n  //-----------------------------------\n  _eventHandler(customEvent) {\n    // This event might be a something like 'click' which does not have\n    // an attached ringaEvent yet!\n    customEvent.detail.ringaEvent = customEvent.detail.ringaEvent || new RingaEvent(customEvent.type, customEvent.detail, customEvent.bubbles, customEvent.cancellable);\n\n    // TODO, how do we handle two controllers handling the same event?\n    if (customEvent.detail.ringaEvent.controller) {\n      throw Error('Controller::_eventHandler(): event was received that has already been handled by another controller: ' + customEvent);\n    }\n\n    customEvent.detail.ringaEvent.controller = this;\n\n    let commandThreadFactory = this.eventTypeToCommandThreadFactory[customEvent.type];\n\n    if (!commandThreadFactory) {\n      throw Error('Controller::_eventHandler(): caught an event but there is no associated CommandThreadFactory! Fatal error.');\n    }\n\n    customEvent.detail.ringaEvent.caught = true;\n\n    let abort;\n    try {\n      abort = this.preInvokeHandler(customEvent.detail.ringaEvent);\n    } catch (error) {\n      // At this point we don't have a thread yet, so this is all kinds of whack.\n      if (this.options.consoleLogFails) {\n        console.error(error);\n      }\n\n      customEvent.detail.ringaEvent._fail(error);\n    }\n\n    if (abort === true) {\n      return;\n    }\n\n    try {\n      let commandThread = this.invoke(customEvent.detail.ringaEvent, commandThreadFactory);\n\n      this.postInvokeHandler(customEvent.detail.ringaEvent, commandThread);\n    } catch (error) {\n      this.threadFailHandler(commandThread, error);\n    }\n  }\n\n  preInvokeHandler(ringaEvent) {\n    // Can be extended by a subclass\n    return false;\n  }\n\n  postInvokeHandler(ringaEvent, commandThread) {\n    // Can be extended by a subclass\n  }\n\n  threadDoneHandler(commandThread) {\n    if (!this.commandThreads.has(commandThread.id)) {\n      throw Error(`Controller::threadDoneHandler(): could not find thread with id ${commandThread.id}`);\n    }\n\n    this.commandThreads.remove(commandThread);\n\n    commandThread.ringaEvent._done();\n  }\n\n  threadFailHandler(commandThread, error, kill) {\n    if (this.options.consoleLogFails) {\n      console.error(error);\n    }\n\n    if (kill) {\n      if (this.commandThreads.has(commandThread.id)) {\n        this.commandThreads.remove(commandThread);\n      } else {\n        throw Error(`Controller:threadFailHandler(): the CommandThread with the id ${commandThread.id} was not found.`)\n      }\n    }\n\n    commandThread.ringaEvent._fail(error);\n  }\n\n  dispatch(eventType, details) {\n    return new RingaEvent(eventType, details).dispatch(this.domNode);\n  }\n}\n\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/Controller.js","import CommandAbstract from '../CommandAbstract';\nimport {buildArgumentsFromRingaEvent} from '../util/command';\n\n/**\n * Command is the base class for all command objects that are run in a Ringa application or module.\n */\nclass Command extends CommandAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new Command. This *must* be called via super() from a subclass constructor.\n   *\n   * @param commandThread The parent thread that owns this command.\n   * @param argNames For efficiency, the CommandFactory instrospects this Command's execute(...) arguments.\n   */\n  constructor(commandThread, argNames) {\n    super(commandThread);\n\n    this.argNames = argNames;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n\n  /**\n   * Internal execution method called by CommandThread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    let args = buildArgumentsFromRingaEvent(this, this.argNames, this.commandThread.ringaEvent);\n\n    const donePassedAsArg = this.argNames.indexOf('done') !== -1;\n\n    // If the function returns true, we continue on the next immediate cycle.\n    // If, however the function requested that 'done' be passed, we assume it is an asynchronous\n    // function and let the function determine when it will call done.\n    if (this.execute.apply(this, args) && !donePassedAsArg) {\n      this.done();\n    }\n  }\n\n  /**\n   * Override this method to provide functionality to the command.\n   *\n   * @returns {boolean}\n   */\n  execute() {\n    // To be overridden by subclass\n    return false;\n  }\n\n  /**\n   * Call this method if an error occurred during the processing of a command.\n   *\n   * @param error The error that has occurred.\n   * @param kill True if you want the thread to die immediately.\n   */\n  fail(error, kill = false) {\n    super.fail(error, kill);\n  }\n}\n\nexport default Command;\n\n\n// WEBPACK FOOTER //\n// ./src/commands/Command.js","import {ForceUpdate} from '../';\n\n\n/**\n * This is a global map of all Class types to the expected injector object.\n *\n * @type {Map}\n */\nconst classToInjections = new WeakMap();\n\n/**\n * The inject descriptor is used like so:\n *\n *   @inject(ClassName)\n *   this.classInstance;\n *\n * OR\n *\n *   @inject('ObjectName')\n *   this.classInstance;\n *\n * @param classTypeOrName Either a Class reference or a string representing a requested object by name.\n * @param option Could be Ring.ForceUpdate which forces the parent class ReactDOM instance to call forceUpdate\n *               when the property is set.\n */\nexport default function inject(classTypeOrName, option) {\n  return function(target, key, descriptor) {\n    let injector = (classToInjections[target.constructor.name] = classToInjections[target.constructor.name] || {});\n    injector[key] = { classTypeOrName, option };\n\n    target.injector = injector;\n\n    // If ForceUpdate is set, then we wrap the default setter in a method\n    // that calls forceUpdate after the set has occurred.\n    if (option === ForceUpdate) {\n      let setter = descriptor.set;\n\n      descriptor.set = function(value) {\n        setter.call(this, value);\n\n        this.forceUpdate();\n      }\n    }\n\n    return descriptor;\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/decorators/inject.js","import inject from './decorators/inject';\nimport Command from './commands/Command';\nimport CommandFactory from './CommandFactory';\nimport CommandThreadFactory from './CommandThreadFactory';\nimport Controller from './Controller';\nimport RingaEvent from './RingaEvent';\nimport RingaEventFactory from './RingaEventFactory';\n\nconst ForceUpdate = Symbol('ForceUpdate');\n\nexport { inject, Command, CommandFactory, CommandThreadFactory, Controller, RingaEvent, ForceUpdate };\n\nexport default {\n  inject,\n  ForceUpdate,\n  Controller,\n  Command,\n  CommandFactory,\n  CommandThreadFactory,\n  Event: RingaEvent,\n  dispatch: (eventType, details, domNode = document) => {\n    return new RingaEvent(eventType, details).dispatch(domNode);\n  },\n  iif: (condition, executor) => {\n\n  },\n  Spawn: (executor) => {\n\n  },\n  Bind: (commandAbstract, ...params) => {\n\n  },\n  EventFactory: (eventType, detail, domNode, requireCatch = false, bubbles = true, cancellable = true) => {\n    return new RingaEventFactory(eventType, detail, domNode, requireCatch, bubbles, cancellable);\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+\\:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code\\])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[\\(\\)]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g, '');\n                }\n                var tokens = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').split(/\\s+/).slice(1);\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var tokens = line.split('@');\n                    var locationParts = this.extractLocation(tokens.pop());\n                    var functionName = tokens.join('@') || undefined;\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                        .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                        .replace(/\\([^\\)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^\\)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^\\(]+\\(([^\\)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./~/error-stack-parser/error-stack-parser.js","(function (root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function () {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str[0].toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function () {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n\n    function StackFrame(obj) {\n        if (obj instanceof Object) {\n            var props = booleanProps.concat(numericProps.concat(stringProps.concat(arrayProps)));\n            for (var i = 0; i < props.length; i++) {\n                if (obj.hasOwnProperty(props[i]) && obj[props[i]] !== undefined) {\n                    this['set' + _capitalize(props[i])](obj[props[i]]);\n                }\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function () {\n            return this.args;\n        },\n        setArgs: function (v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function () {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function (v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function () {\n            var functionName = this.getFunctionName() || '{anonymous}';\n            var args = '(' + (this.getArgs() || []).join(',') + ')';\n            var fileName = this.getFileName() ? ('@' + this.getFileName()) : '';\n            var lineNumber = _isNumber(this.getLineNumber()) ? (':' + this.getLineNumber()) : '';\n            var columnNumber = _isNumber(this.getColumnNumber()) ? (':' + this.getColumnNumber()) : '';\n            return functionName + args + fileName + lineNumber + columnNumber;\n        }\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function (p) {\n            return function (v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function (p) {\n            return function (v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function (p) {\n            return function (v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./~/error-stack-parser/~/stackframe/stackframe.js","/*===========================================================================*\\\n * Requires\n\\*===========================================================================*/\nvar JClass = require('jclass');\n\n/*===========================================================================*\\\n * HashArray\n\\*===========================================================================*/\nvar HashArray = JClass._extend({\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  init: function(keyFields, callback, options) {\n    keyFields = keyFields instanceof Array ? keyFields : [keyFields];\n\n    this._map = {};\n    this._list = [];\n    this.callback = callback;\n\n    this.keyFields = keyFields;\n\n    this.isHashArray = true;\n    \n    this.options = options || {\n      ignoreDuplicates: false\n    };\n\n    if (callback) {\n      callback('construct');\n    }\n  },\n  //-----------------------------------\n  // add()\n  //-----------------------------------\n  addOne: function (obj) {\n    var needsDupCheck = false;\n    for (var key in this.keyFields) {\n      key = this.keyFields[key];\n      var inst = this.objectAt(obj, key);\n      if (inst) {\n        if (this._map[inst]) {\n          if (this.options.ignoreDuplicates)\n            return;\n          if (this._map[inst].indexOf(obj) != -1) {\n            // Cannot add the same item twice\n            needsDupCheck = true;\n            continue;\n          }\n          this._map[inst].push(obj);\n        }\n        else this._map[inst] = [obj];\n      }\n    }\n\n    if (!needsDupCheck || this._list.indexOf(obj) == -1)\n      this._list.push(obj);\n  },\n  add: function() {\n    for (var i = 0; i < arguments.length; i++) {\n      this.addOne(arguments[i]);\n    }\n\n    if (this.callback) {\n      this.callback('add', Array.prototype.slice.call(arguments, 0));\n    }\n    \n    return this;\n  },\n  addAll: function (arr) {\n    if (arr.length < 100)\n      this.add.apply(this, arr);\n    else {\n      for (var i = 0; i < arr.length; i++)\n        this.add(arr[i]);\n    }\n    \n    return this;\n  },\n  addMap: function(key, obj) {\n    this._map[key] = obj;\n    if (this.callback) {\n      this.callback('addMap', {\n        key: key,\n        obj: obj\n      });\n    }\n    \n    return this;\n  },\n  //-----------------------------------\n  // Intersection, union, etc.\n  //-----------------------------------\n  /**\n   * Returns a new HashArray that contains the intersection between this (A) and the hasharray passed in (B). Returns A ^ B.\n   */\n  intersection: function (other) {\n    var self = this;\n\n    if (!other || !other.isHashArray)\n      throw Error('Cannot HashArray.intersection() on a non-hasharray object. You passed in: ', other);\n\n    var ret = this.clone(null, true),\n      allItems = this.clone(null, true).addAll(this.all.concat(other.all));\n\n    allItems.all.forEach(function (item) {\n      if (self.collides(item) && other.collides(item))\n        ret.add(item);\n    });\n\n    return ret;\n  },\n  /**\n   * Returns a new HashArray that contains the complement (difference) between this hash array (A) and the hasharray passed in (B). Returns A - B.\n   */\n  complement: function (other) {\n    var self = this;\n\n    if (!other || !other.isHashArray)\n      throw Error('Cannot HashArray.complement() on a non-hasharray object. You passed in: ', other);\n\n    var ret = this.clone(null, true);\n\n    this.all.forEach(function (item) {\n      if (!other.collides(item))\n        ret.add(item);\n    });\n\n    return ret;\n  },\n  //-----------------------------------\n  // Retrieval\n  //-----------------------------------\n  get: function(key) {\n    return (!(this._map[key] instanceof Array) || this._map[key].length != 1) ? this._map[key] : this._map[key][0];\n  },\n  getAll: function(keys) {\n    keys = keys instanceof Array ? keys : [keys];\n\n    if (keys[0] == '*')\n      return this.all;\n\n    var res = new HashArray(this.keyFields);\n    for (var key in keys)\n      res.add.apply(res, this.getAsArray(keys[key]));\n\n    return res.all;\n  },\n  getAsArray: function(key) {\n    return this._map[key] || [];\n  },\n  getUniqueRandomIntegers: function (count, min, max) {\n    var res = [], map = {};\n\n    count = Math.min(Math.max(max - min, 1), count);\n    \n    while (res.length < count)\n    {\n      var r = Math.floor(min + (Math.random() * (max + 1)));\n      if (map[r]) continue;\n      map[r] = true;\n      res.push(r);\n    }\n\n    return res;\n  },\n  sample: function (count, keys) {\n    // http://en.wikipedia.org/wiki/Image_(mathematics)\n    var image = this.all,\n      ixs = {},\n      res = [];\n\n    if (keys)\n      image = this.getAll(keys);\n\n    var rand = this.getUniqueRandomIntegers(count, 0, image.length - 1);\n\n    for (var i = 0; i < rand.length; i++)\n      res.push(image[rand[i]]);\n\n    return res;\n  },\n  //-----------------------------------\n  // Peeking\n  //-----------------------------------\n  has: function(key) {\n    return this._map.hasOwnProperty(key);\n  },\n  collides: function (item) {\n    for (var k in this.keyFields)\n      if (this.has(this.objectAt(item, this.keyFields[k])))\n        return true;\n    \n    return false;\n  },\n  hasMultiple: function(key) {\n    return this._map[key] instanceof Array;\n  },\n  //-----------------------------------\n  // Removal\n  //-----------------------------------\n  removeByKey: function() {\n    var removed = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var key = arguments[i];\n      var items = this._map[key].concat();\n      if (items) {\n        removed = removed.concat(items);\n        for (var j in items) {\n          var item = items[j];\n          for (var ix in this.keyFields) {\n            var key2 = this.objectAt(item, this.keyFields[ix]);\n            if (key2 && this._map[key2]) {\n              var ix = this._map[key2].indexOf(item);\n              if (ix != -1) {\n                this._map[key2].splice(ix, 1);\n              }\n\n              if (this._map[key2].length == 0)\n                delete this._map[key2];\n            }\n          }\n\n          this._list.splice(this._list.indexOf(item), 1);\n        }\n      }\n      delete this._map[key];\n    }\n\n    if (this.callback) {\n      this.callback('removeByKey', removed);\n    }\n    \n    return this;\n  },\n  remove: function() {\n    for (var i = 0; i < arguments.length; i++) {\n      var item = arguments[i];\n      for (var ix in this.keyFields) {\n        var key = this.objectAt(item, this.keyFields[ix]);\n        if (key) {\n          var ix = this._map[key].indexOf(item);\n          if (ix != -1)\n            this._map[key].splice(ix, 1);\n\n          if (this._map[key].length == 0)\n            delete this._map[key];\n        }\n      }\n\n      this._list.splice(this._list.indexOf(item), 1);\n    }\n\n    if (this.callback) {\n      this.callback('remove', arguments);\n    }\n    \n    return this;\n  },\n  removeAll: function() {\n    var old = this._list.concat();\n    this._map = {};\n    this._list = [];\n\n    if (this.callback) {\n      this.callback('remove', old);\n    }\n    \n    return this;\n  },\n  //-----------------------------------\n  // Utility\n  //-----------------------------------\n  objectAt: function(obj, path) {\n    if (typeof path === 'string') {\n      return obj[path];\n    }\n\n    var dup = path.concat();\n    // else assume array.\n    while (dup.length && obj) {\n      obj = obj[dup.shift()];\n    }\n\n    return obj;\n  },\n  //-----------------------------------\n  // Iteration\n  //-----------------------------------\n  forEach: function(keys, callback) {\n    keys = keys instanceof Array ? keys : [keys];\n\n    var objs = this.getAll(keys);\n\n    objs.forEach(callback);\n    \n    return this;\n  },\n  forEachDeep: function(keys, key, callback) {\n    keys = keys instanceof Array ? keys : [keys];\n\n    var self = this,\n      objs = this.getAll(keys);\n\n    objs.forEach(function (item) {\n      callback(self.objectAt(item, key), item);\n    });\n    \n    return this;\n  },\n  //-----------------------------------\n  // Cloning\n  //-----------------------------------\n  clone: function(callback, ignoreItems) {\n    var n = new HashArray(this.keyFields.concat(), callback ? callback : this.callback);\n    if (!ignoreItems)\n      n.add.apply(n, this.all.concat());\n    return n;\n  },\n  //-----------------------------------\n  // Mathematical\n  //-----------------------------------\n  sum: function(keys, key, weightKey) {\n    var self = this,\n      ret = 0;\n    this.forEachDeep(keys, key, function (value, item) {\n      if (weightKey !== undefined)\n        value *= self.objectAt(item, weightKey);\n\n      ret += value;\n    });\n    return ret;\n  },\n  average: function(keys, key, weightKey) {\n    var ret = 0,\n      tot = 0,\n      weightsTotal = 0,\n      self = this;\n\n    if (weightKey !== undefined)\n      this.forEachDeep(keys, weightKey, function (value) {\n        weightsTotal += value;\n      })\n\n    this.forEachDeep(keys, key, function (value, item) {\n      if (weightKey !== undefined)\n        value *= (self.objectAt(item, weightKey) / weightsTotal);\n\n      ret += value;\n      tot++;\n    });\n\n    return weightKey !== undefined ? ret : ret / tot;\n  },\n  //-----------------------------------\n  // Filtering\n  //-----------------------------------\n  filter: function (keys, callbackOrKey) {\n    var self = this;\n    \n    var callback = (typeof(callbackOrKey) == 'function') ? callbackOrKey : defaultCallback;\n\n    var ha = new HashArray(this.keyFields);\n    ha.addAll(this.getAll(keys).filter(callback));\n    return ha;\n    \n    function defaultCallback(item) {\n      var val = self.objectAt(item, callbackOrKey);\n      return val !== undefined && val !== false;\n    }\n  }\n});\n\n//-----------------------------------\n// Operators\n//-----------------------------------\nObject.defineProperty(HashArray.prototype, 'all', {\n  get: function () {\n    return this._list;\n  }\n});\n\nObject.defineProperty(HashArray.prototype, 'map', {\n  get: function () {\n    return this._map;\n  }\n});\n\nmodule.exports = HashArray;\n\n//-----------------------------------\n// Browser\n//-----------------------------------\nif (typeof window !== 'undefined')\n  window.HashArray = HashArray;\n\n\n// WEBPACK FOOTER //\n// ./~/hasharray/src/HashArray.js","/**\n * jclass v1.1.9\n * https://github.com/riga/jclass\n *\n * Marcel Rieger, 2015\n * MIT licensed, http://www.opensource.org/licenses/mit-license\n */\n\n(function(factory) {\n\n  /**\n   * Make jclass available in any context.\n   */\n\n  if (typeof(define) == \"function\" && define.amd) {\n    // AMD\n    define([], factory);\n\n  } else if (typeof(exports) == \"object\") {\n    // CommonJS\n    exports = factory();\n\n    if (typeof(module) == \"object\") {\n      // NodeJS\n      module.exports = exports;\n    }\n\n  } else if (window) {\n    // Browser\n    window.JClass = factory();\n\n  } else if (typeof(console) == \"object\" && console.error instanceof Function) {\n    // error case\n    console.error(\"cannot determine environment\");\n  }\n\n})(function() {\n\n  /**\n   * Helper functions.\n   */\n\n  /**\n   * Checks whether a passed object is a function.\n   *\n   * @param obj - The object to check.\n   * @returns {boolean}\n   */\n  var isFn = function(obj) {\n    return obj instanceof Function;\n  };\n\n  /**\n   * Extends a target object by one or more source objects with shallow key comparisons. Note that\n   * the extension is done in-place.\n   *\n   * @param {object} target - The target object to extend.\n   * @param {...object} source - Source objects.\n   * @returns {object} The extended object.\n   */\n  var extend = function(target) {\n    var sources = Array.prototype.slice.call(arguments, 1);\n\n    // loop through all sources\n    for (var i in sources) {\n      var source = sources[i];\n\n      // object check\n      if (typeof(source) != \"object\") {\n        continue;\n      }\n\n      // loop through all source attributes\n      for (var key in source) {\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  };\n\n\n  /**\n   * Default options.\n   */\n\n  var defaultOptions = {\n    // internal object for indicating that class objects don't have a class object themselves,\n    // may not be used by users\n    _isClassObject: false\n  };\n\n\n  /**\n   * Flags.\n   */\n\n  // flag to distinguish between prototype and class instantiation \n  var initializing = false;\n\n\n  /**\n   * Base class definition.\n   */\n\n  // empty BaseClass implementation\n  var BaseClass = function(){};\n\n  // add the _subClasses entry\n  BaseClass._subClasses = [];\n\n  // empty init method\n  BaseClass.prototype.init = function(){};\n\n\n  /**\n   * Extend mechanism. Returns a derived class.\n   *\n   * @param {object} instanceMembers - Members that will be owned by instances.\n   * @param {object} classMembers - Members that will be owned by the class itself.\n   * @returns {JClass}\n   */\n  BaseClass._extend = function(instanceMembers, classMembers, options) {\n\n    // default arguments\n    if (instanceMembers === undefined) {\n      instanceMembers = {};\n    }\n    if (classMembers === undefined) {\n      classMembers = {};\n    }\n    if (options === undefined) {\n      options = {};\n    }\n\n    // mixin default options\n    options = extend({}, defaultOptions, options);\n\n\n    // sub class dummy constructor\n    var JClass = function() {\n      // nothing happens here when we are initializing\n      if (initializing){\n        return;\n      }\n\n      // store a reference to the class itself\n      this._class = JClass;\n\n      // all construction is actually done in the init method\n      if (this.init instanceof Function) {\n        this.init.apply(this, arguments);\n      }\n    };\n\n\n    // alias for readability\n    var SuperClass = this;\n\n    // create an instance of the super class via new\n    // the flag sandwich prevents a call to the init method\n    initializing = true;\n    var prototype = new SuperClass();\n    initializing = false;\n\n    // get the prototype of the super class\n    var superPrototype = SuperClass.prototype;\n\n    // the instance of the super class is our new prototype\n    JClass.prototype = prototype;\n\n    // enforce the constructor to be what we expect\n    // calls to the constructor will invoke the init method (see above)\n    JClass.prototype.constructor = JClass;\n\n    // store a reference to the super class\n    JClass._superClass = SuperClass;\n\n    // store references to all extending classes\n    JClass._subClasses = [];\n    SuperClass._subClasses.push(JClass);\n\n    // make this class extendable as well\n    JClass._extend = SuperClass._extend;\n\n\n    // _extends returns true if the class itself extended \"target\"\n    // in any hierarchy, e.g. every class extends \"JClass\" itself\n    JClass._extends = function(target) {\n      // this function operates recursive, so stop when the super class is our BaseClass\n      if (this._superClass == BaseClass) {\n        return false;\n      }\n\n      // success case\n      if (target == this._superClass || target == BaseClass) {\n        return true;\n      }\n\n      // continue with the next super class\n      return this._superClass._extends(target);\n    };\n\n\n    // propagate instance members directly to the created protoype,\n    // the member is either a normal member or a descriptor\n    for (var key in instanceMembers) {\n      var property = Object.getOwnPropertyDescriptor(instanceMembers, key);\n      var member   = property.value;\n\n      // descriptor flag set?\n      if (member !== null && typeof(member) == \"object\" && member.descriptor) {\n        Object.defineProperty(prototype, key, member);\n\n      // getter/setter syntax\n      } else if (!(\"value\" in property) && (\"set\" in property || \"get\" in property)) {\n        Object.defineProperty(prototype, key, property);\n\n      // normal member, simple assignment\n      } else {\n        prototype[key] = member;\n\n        // if both member and the super member are distinct functions\n        // add the super member to the member as \"_super\"\n        var superMember = superPrototype[key];\n        if (isFn(member) && isFn(superMember) && member !== superMember) {\n          member._super = superMember;\n        }\n      }\n    }\n\n\n    // propagate class members to the _members object\n    if (!options._isClassObject) {\n      // try to find the super class of the _members object \n      var ClassMembersSuperClass = SuperClass._members === undefined ?\n        BaseClass : SuperClass._members._class;\n\n      // create the actual class of the _members instance\n      // with an updated version of our options\n      var opts = extend({}, options, { _isClassObject: true });\n      var ClassMembersClass = ClassMembersSuperClass._extend(classMembers, {}, opts);\n\n      // store the actual JClass in ClassMembersClass\n      ClassMembersClass._instanceClass = JClass;\n\n      // create the _members instance\n      JClass._members = new ClassMembersClass();\n    }\n\n\n    // return the new class\n    return JClass;\n  };\n\n\n  /**\n   * Converts arbitrary protoype-style classes to our JClass definition.\n   *\n   * @param {function} cls - The class to convert.\n   * @returns {JClass}\n   */\n  BaseClass._convert = function(cls, options) {\n    // the properties consist of the class' prototype\n    var instanceMembers = cls.prototype;\n\n    // add the constructor function\n    instanceMembers.init = function() {\n      // simply create an instance of our target class\n      var origin = this._origin = BaseClass._construct(cls, arguments);\n\n      // add properties for each own property in _origin\n      Object.keys(origin).forEach(function(key) {\n        if (!origin.hasOwnProperty(key)) {\n          return;\n        }\n\n        Object.defineProperty(this, key, {\n          get: function() {\n            return origin[key];\n          }\n        });\n      }, this);\n    };\n\n    // finally, create and return our new class\n    return BaseClass._extend(instanceMembers, {}, options);\n  };\n\n\n  /**\n   * Returns an instance of a class with a list of arguments. This provides an apply-like\n   * constructor usage. Note that this approach does not work with native constructors (e.g. String\n   * or Boolean).\n   *\n   * @param {Class|JClass} cls - The class to instantiate. This may be a JClass or a prototype-based\n   *   class.\n   * @param {array} [args=[]] - Arguments to pass to the constructor.\n   * @returns {instance}\n   */\n  BaseClass._construct = function(cls, args) {\n    // empty default args\n    if (args === undefined) {\n      args = [];\n    }\n\n    // create a class wrapper that calls cls like a function\n    var Class = function() {\n      return cls.apply(this, args);\n    };\n\n    // copy the prototype\n    Class.prototype = cls.prototype;\n\n    // return a new instance\n    return new Class();\n  };\n\n\n  /**\n   * Returns a property descriptor of the super class.\n   *\n   * @param {JClass|instance} cls - A JClass or an instance of a JClass to retrieve the property\n   *   descriptor from.\n   * @param {string} prop - The name of the property descriptor to get.\n   * @returns {object}\n   */\n  BaseClass._superDescriptor = function(cls, prop) {\n    // if cls is an instance, use its class\n    if (\"_class\" in cls && cls instanceof cls._class) {\n      cls = cls._class;\n    }\n\n    // a JClass?\n    if (\"_extends\" in cls && cls._extends instanceof Function && cls._extends(this)) {\n      return Object.getOwnPropertyDescriptor(cls._superClass.prototype, prop);\n    } else {\n      return undefined;\n    }\n  };\n\n\n  /**\n   * Return the BaseClass.\n   */\n\n  return BaseClass;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./~/jclass/index.js","import RingaHashArray from './RingaHashArray';\n\nclass CommandThread extends RingaHashArray {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(id, commandThreadFactory, options) {\n    super(id);\n\n    this.options = options;\n    this.commandThreadFactory = commandThreadFactory;\n\n    this.running = false;\n\n    // TODO: a command thread can potentially spawn child command threads\n    this.children = [];\n  }\n\n  get controller() {\n    return this.commandThreadFactory.controller;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  buildCommands() {\n    this.commandThreadFactory.all.forEach((commandFactory) => {\n      let command = commandFactory.build(this);\n\n      this.add(command);\n    });\n  }\n\n  run(ringaEvent, doneHandler, failHandler) {\n    if (this.running) {\n      throw Error('CommandThread::run(): you cannot start a thread while it is already running!');\n    }\n\n    if (this.commandThreadFactory.all.length === 0) {\n      throw Error('CommandThread::run(): attempting to run a thread with no commands!');\n    }\n\n    if (!ringaEvent) {\n      throw Error('CommandThread::run(): cannot run a thread without a RingaEvent!');\n    }\n\n    this.ringaEvent = ringaEvent;\n    this.doneHandler = doneHandler;\n    this.failHandler = failHandler;\n\n    this.buildCommands();\n\n    // The current command we are running\n    this.index = 0;\n\n    this.executeNext();\n  }\n\n  executeNext() {\n    let command = this.all[this.index];\n\n    try {\n      command._execute(this._commandDoneHandler.bind(this), this._commandFailHandler.bind(this));\n    } catch (error) {\n      this._commandFailHandler(error);\n    }\n  }\n\n  kill() {\n    this.running = false;\n  }\n\n  //-----------------------------------\n  // Events\n  //-----------------------------------\n  _commandDoneHandler(error) {\n    this.index++;\n\n    if (this.index < this.all.length) {\n      setTimeout(this.executeNext.bind(this), 0);\n    } else {\n      this.doneHandler(this);\n    }\n  }\n\n  _commandFailHandler(error, kill) {\n    this.error = error;\n\n    this.failHandler(this, error, kill);\n\n    if (!kill) {\n      this._commandDoneHandler(error);\n    }\n  }\n}\n\nexport default CommandThread;\n\n\n// WEBPACK FOOTER //\n// ./src/CommandThread.js","import CommandAbstract from '../CommandAbstract';\n\nclass CommandEventWrapper extends CommandAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new CommandEventWrapper\n   *\n   * @param commandThread The parent thread that owns this command.\n   * @param ringaEventFactory The event to dispatch and watch!\n   */\n  constructor(commandThread, ringaEventFactory) {\n    super(commandThread);\n\n    this.ringaEventFactory = ringaEventFactory;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by CommandThread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    this.dispatchedRingaEvent = this.ringaEventFactory.build(this);\n\n    this.dispatchedRingaEvent.addDoneListener(this.dispatchedRingaEventDoneHandler.bind(this));\n    this.dispatchedRingaEvent.addFailListener(this.dispatchedRingaEventFailHandler.bind(this));\n\n    let domNode = this.dispatchedRingaEvent.domNode || this.ringaEvent.target;\n\n    this.dispatchedRingaEvent.dispatch(domNode);\n\n    if (this.dispatchedRingaEvent.detail.requireCatch && !this.dispatchedRingaEvent.caught) {\n      this.fail(Error('CommandEventWrapper::_execute(): event ' + this.dispatchedRingaEvent.type + ' was expected to be caught and it was not.'))\n    }\n  }\n\n  toString() {\n    return this.id + ': ' + this.ringaEventFactory.eventType;\n  }\n\n  //-----------------------------------\n  // Events\n  //-----------------------------------\n  dispatchedRingaEventDoneHandler() {\n    this.done();\n  }\n\n  dispatchedRingaEventFailHandler(error) {\n    this.fail(error);\n  }\n}\n\nexport default CommandEventWrapper;\n\n\n// WEBPACK FOOTER //\n// ./src/commands/CommandEventWrapper.js","import CommandAbstract from '../CommandAbstract';\nimport {buildArgumentsFromRingaEvent} from '../util/command';\nimport {getArgNames} from '../util/function';\n\n/**\n * CommandFunctionWrapper is a wrapper for a single function. As a general rule you will not use this directly.\n */\nclass CommandFunctionWrapper extends CommandAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new Command. This *must* be called via super() from a subclass constructor.\n   *\n   * @param commandThread The parent thread that owns this command.\n   * @param func The function that is run when the CommandThread calls _execute().\n   */\n  constructor(commandThread, func) {\n    super(commandThread);\n\n    this.func = func;\n    this.expectedArguments = getArgNames(func);\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by CommandThread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    const args = buildArgumentsFromRingaEvent(this, this.expectedArguments, this.ringaEvent);\n\n    const donePassedAsArg = this.expectedArguments.indexOf('done') !== -1;\n\n    try {\n      // If the function requested that 'done' be passed, we assume it is an asynchronous\n      // function and let the function determine when it will call done.\n      this.func.apply(undefined, args);\n\n      if (!donePassedAsArg) {\n        this.done();\n      }\n    } catch (error) {\n      this.fail(error);\n    }\n  }\n\n  toString() {\n    return this.id + ': ' + this.func.toString().substr(0, 128);\n  }\n}\n\nexport default CommandFunctionWrapper;\n\n\n// WEBPACK FOOTER //\n// ./src/commands/CommandFunctionWrapper.js","import CommandAbstract from '../CommandAbstract';\n\nclass CommandPromiseWrapper extends CommandAbstract {\n\n}\n\nexport default CommandPromiseWrapper;\n\n\n// WEBPACK FOOTER //\n// ./src/commands/CommandPromiseWrapper.js","import CommandAbstract from '../CommandAbstract';\n\nclass CommandsParallelWrapper extends CommandAbstract {\n\n}\n\nexport default CommandsParallelWrapper;\n\n\n// WEBPACK FOOTER //\n// ./src/commands/CommandsParallelWrapper.js"],"sourceRoot":""}